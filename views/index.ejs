<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEFAIRECLOSER.COM | Closer Directory</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@200;300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <script>
    tailwind.config = {
        theme: {
            extend: {
                fontFamily: {
                    display: ['Outfit', 'sans-serif'],
                    mono: ['JetBrains Mono', 'monospace'],
                },
                colors: {
                    surface: { 50: '#fafafa', 100: '#f4f4f5', 200: '#e4e4e7', 300: '#d4d4d8', 800: '#111113', 900: '#09090b', 950: '#050506' },
                    accent: { 400: '#a78bfa', 500: '#8b5cf6', 600: '#7c3aed', 700: '#6d28d9' },
                    // LA COULEUR PREMIUM (OR)
                    gold: { 300: '#fcd34d', 400: '#fbbf24', 500: '#f59e0b', 600: '#d97706' }
                }
            }
        }
    }
</script>
    <style>
        *, *::before, *::after { box-sizing: border-box; }
        body { font-family: 'Outfit', sans-serif; background: #050506; color: #fafafa; overflow-x: hidden; position: relative; }

        /* --- Baguette Studio ambient background --- */
        body::after {
            content: '';
            position: fixed; inset: -20%;
            z-index: 0;
            pointer-events: none;
            background:
                radial-gradient(900px 500px at 18% 12%, rgba(139, 92, 246, 0.16), transparent 60%),
                radial-gradient(800px 420px at 78% 18%, rgba(167, 139, 250, 0.12), transparent 62%),
                radial-gradient(700px 420px at 55% 78%, rgba(124, 58, 237, 0.10), transparent 65%);
            opacity: 0.9;
            filter: saturate(1.05);
        }
        body > * { position: relative; z-index: 1; }

        .baguette-surface {
            background: linear-gradient(180deg, rgba(255,255,255,0.045), rgba(255,255,255,0.015));
            border: 1px solid rgba(255,255,255,0.08);
            box-shadow:
                0 30px 90px -50px rgba(0,0,0,0.8),
                0 0 0 1px rgba(255,255,255,0.02) inset;
        }
        .baguette-input {
            background: rgba(255,255,255,0.04) !important;
            border-color: rgba(255,255,255,0.14) !important;
        }
        .baguette-input:hover { border-color: rgba(139, 92, 246, 0.28) !important; }
        .baguette-input:focus {
            border-color: rgba(139, 92, 246, 0.95) !important;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.15) !important;
        }

        /* --- Grain overlay --- */
        body::before {
            content: '';
            position: fixed; inset: 0; z-index: 9999;
            pointer-events: none;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
            opacity: 0.5;
        }

        /* --- Custom scrollbar --- */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(139,92,246,0.3); border-radius: 99px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(139,92,246,0.6); }

        /* --- Selection --- */
        ::selection { background: rgba(139,92,246,0.4); color: white; }


        /* --- Card hover glow --- */
        .card-glow {
            position: relative;
            transition: transform 0.4s cubic-bezier(0.22, 1, 0.36, 1), box-shadow 0.4s ease;
        }
        .card-glow::after {
            content: '';
            position: absolute; inset: -1px;
            border-radius: inherit;
            background: linear-gradient(135deg, rgba(139,92,246,0), rgba(139,92,246,0.15), rgba(139,92,246,0));
            opacity: 0;
            transition: opacity 0.4s ease;
            z-index: -1;
            pointer-events: none;
        }
        .card-glow:hover::after { opacity: 1; }
        .card-glow:hover { transform: translateY(-6px); box-shadow: 0 20px 60px -15px rgba(139,92,246,0.2); }

        /* --- Stagger fade-in --- */
        .stagger-in { opacity: 0; transform: translateY(24px); animation: fadeUp 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards; }
        @keyframes fadeUp { to { opacity: 1; transform: translateY(0); } }

        /* --- Modal --- */
        .modal-backdrop { opacity: 0; transition: opacity 0.3s ease; pointer-events: none; }
        .modal-backdrop.active { opacity: 1; pointer-events: all; }
        .modal-panel { transform: translateY(30px) scale(0.97); opacity: 0; transition: all 0.4s cubic-bezier(0.22, 1, 0.36, 1); }
        .modal-backdrop.active .modal-panel { transform: translateY(0) scale(1); opacity: 1; }

        /* --- Filter panel toggle --- */
        .filter-panel { max-height: 0; overflow: hidden; transition: max-height 0.5s cubic-bezier(0.22, 1, 0.36, 1), opacity 0.3s ease; opacity: 0; }
        .filter-panel.open { max-height: 800px; opacity: 1; }

        /* --- Stat counter --- */
        .stat-pill {
            background: linear-gradient(135deg, rgba(139,92,246,0.08), rgba(139,92,246,0.02));
            border: 1px solid rgba(139,92,246,0.12);
        }

        /* --- Input focus ring --- */
        input:focus, select:focus { outline: none; border-color: #8b5cf6 !important; box-shadow: 0 0 0 3px rgba(139,92,246,0.15); }

        /* --- Reveal animation --- */
        .reveal-btn .reveal-cover { transition: all 0.4s cubic-bezier(0.22, 1, 0.36, 1); }
        .reveal-btn.revealed .reveal-cover { opacity: 0; transform: translateY(8px); pointer-events: none; }
        .reveal-btn.revealed .contact-val { filter: blur(0); }

        /* --- Tag chip --- */
        .tag-chip {
            background: rgba(255,255,255,0.04);
            border: 1px solid rgba(255,255,255,0.08);
            transition: all 0.2s ease;
        }
        .tag-chip:hover { background: rgba(139,92,246,0.12); border-color: rgba(139,92,246,0.3); }

        /* --- Smooth checkbox --- */
        input[type="checkbox"] {
            appearance: none; -webkit-appearance: none;
            width: 16px; height: 16px; border-radius: 4px;
            border: 2px solid rgba(255,255,255,0.15);
            background: rgba(255,255,255,0.03);
            cursor: pointer; transition: all 0.2s ease;
            position: relative; flex-shrink: 0;
        }
        input[type="checkbox"]:checked {
            background: #7c3aed; border-color: #7c3aed;
        }
        input[type="checkbox"]:checked::after {
            content: '✓'; position: absolute; inset: 0;
            display: flex; align-items: center; justify-content: center;
            color: white; font-size: 10px; font-weight: 700;
        }

        /* --- Responsive --- */
        @media (max-width: 768px) {
            .hero-title { font-size: 2.2rem !important; line-height: 1.1 !important; }

            /* Quand un modal de closer est ouvert sur mobile, on cache la nav et le header
               pour que la croix soit toujours bien visible et que le focus soit sur la fiche. */
            body.modal-open nav,
            body.modal-open header {
                display: none;
            }
        }
        
    </style>
</head>
<body>

<%- include('partials/nav', { user: (typeof user !== 'undefined' ? user : null) }) %>

<header class="max-w-[1400px] mx-auto px-5 md:px-8 pt-10 md:pt-14 pb-6">
    <div class="stagger-in" style="animation-delay:0.05s">
        <div class="baguette-surface rounded-[32px] p-7 md:p-10 overflow-hidden relative">
            <div class="absolute inset-0 opacity-40 pointer-events-none" style="background: radial-gradient(900px 420px at 20% 10%, rgba(139,92,246,0.16), transparent 55%), radial-gradient(700px 360px at 85% 35%, rgba(167,139,250,0.12), transparent 60%);"></div>

            <div class="relative">
                <div class="mb-6">
                    <p class="text-accent-400 text-xs font-semibold tracking-[0.3em] uppercase flex items-center gap-2">
                        <span class="w-6 h-px bg-accent-500"></span> Répertoire Élite
                    </p>
                </div>

                <div class="flex flex-col lg:flex-row lg:items-end lg:justify-between gap-8">
                    <div class="max-w-2xl">
                        <h2 class="hero-title text-[clamp(2.2rem,5.5vw,4.6rem)] font-extrabold leading-[1.03] tracking-tight mb-5">
                            Trouvez le closer<br>
                            <span class="text-transparent bg-clip-text bg-gradient-to-r from-white via-accent-400 to-accent-600">qui va tout changer.</span>
                        </h2>
                        <p class="text-white/70 text-base md:text-lg font-light leading-relaxed">
                            Parcourez notre répertoire de closers vérifiés. Filtrez par expertise, expérience et spécialisation pour trouver le talent parfait.
                        </p>
                    </div>

                    <div class="flex items-center gap-3 md:gap-5 bg-white/[0.03] border border-white/[0.06] rounded-2xl px-3 py-3 md:px-5 md:py-4 max-w-full overflow-hidden shrink-0">
                        <div class="flex items-center -space-x-3 shrink-0">
                            <img src="https://closers-group.com/public/img/companies/oconico.png" 
                                 class="w-8 h-8 md:w-12 md:h-12 rounded-full border-2 border-[#050506] shadow-lg object-cover z-30" 
                                 alt="Oconico">
                            <img src="https://closers-group.com/public/img/companies/quentin.png" 
                                 class="w-8 h-8 md:w-12 md:h-12 rounded-full border-2 border-[#050506] shadow-lg object-cover z-20" 
                                 alt="Quentin">
                            <img src="https://closers-group.com/public/img/companies/wangen.png" 
                                 class="w-8 h-8 md:w-12 md:h-12 rounded-full border-2 border-[#050506] shadow-lg object-cover z-10" 
                                 alt="Wangen">
                            <img src="https://closers-group.com/public/img/companies/taylor.png" 
                                 class="w-8 h-8 md:w-12 md:h-12 rounded-full border-2 border-[#050506] shadow-lg object-cover z-0" 
                                 alt="Taylor">
                        </div>

                        <div class="flex flex-col items-start gap-1 min-w-0">
                            <div class="flex gap-0.5 md:gap-1 text-accent-400 text-[10px] md:text-xs">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                            </div>
                            <p class="text-xs md:text-sm text-white/60 font-medium leading-snug">
                                <span class="text-white font-bold">+35</span> équipes de ventes partenaires
                            </p>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</header>

<!-- ═══════════════ SEARCH BAR + FILTER TOGGLE ═══════════════ -->
<section class="max-w-[1400px] mx-auto px-5 md:px-8 mb-8 stagger-in" style="animation-delay:0.15s">
    <form action="/" method="GET" id="filterForm">
        <!-- Main search row -->
        <div class="flex flex-col md:flex-row gap-3">
            <div class="flex-1 relative">
                <i class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-white/20 text-sm"></i>
                <input type="text" name="product" placeholder="Rechercher un produit, une niche, un mot-clé…" value="<%= filters.product || '' %>"
                    class="baguette-input w-full rounded-2xl py-4 pl-11 pr-5 text-white placeholder-white/45 text-sm font-medium transition-all duration-300">
            </div>
            <button type="button" onclick="toggleFilters()" id="filterToggleBtn"
                class="flex items-center justify-center gap-2.5 bg-white/[0.04] border border-white/[0.2] hover:border-accent-500/40 hover:bg-accent-600/10 rounded-2xl px-6 py-4 transition-all duration-300 group shrink-0">
                <i class="fas fa-sliders text-sm text-white/30 group-hover:text-accent-400 transition-colors"></i>
                <span class="text-xs font-bold uppercase tracking-wider text-white/50 group-hover:text-white transition-colors">Filtres</span>
                <i class="fas fa-chevron-down text-[10px] text-white/20 group-hover:text-accent-400 transition-all duration-300" id="filterChevron"></i>
            </button>
            <button type="submit"
                class="bg-accent-600 hover:bg-accent-700 text-white px-8 py-4 rounded-2xl font-black text-xs uppercase tracking-[0.18em] transition-all duration-300 shadow-[0_18px_40px_-22px_rgba(139,92,246,0.55)] hover:shadow-[0_22px_50px_-24px_rgba(139,92,246,0.75)] shrink-0 flex items-center gap-2.5">
                <i class="fas fa-bolt text-[10px]"></i> Rechercher
            </button>
        </div>

        <!-- Expandable filters -->
        <div class="filter-panel mt-4" id="filterPanel">
            <div class="bg-white/[0.02] border border-white/[0.2] rounded-3xl p-6 md:p-8">
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5 mb-6">
                    <!-- Profile Type -->
                    <div class="space-y-2">
                        <label class="text-[10px] uppercase font-bold text-white/60 tracking-wider">Type de profil</label>
                        <select name="profileType" class="w-full bg-surface-950 border border-white/[0.2] rounded-xl py-3 px-4 text-sm text-white/80 appearance-none cursor-pointer transition-all hover:border-white/40">
                            <option value="">Tous</option>
                            <option value="Closeur" <%= filters.profileType === 'Closeur' ? 'selected' : '' %>>Closeur</option>
                            <option value="Commercial" <%= filters.profileType === 'Commercial' ? 'selected' : '' %>>Commercial</option>
                            <option value="Setter" <%= filters.profileType === 'Setter' ? 'selected' : '' %>>Setter</option>
                        </select>
                    </div>
                    <!-- Market -->
                    <div class="space-y-2">
                        <label class="text-[10px] uppercase font-bold text-white/60 tracking-wider">Marché</label>
                        <select name="market" class="w-full bg-surface-950 border border-white/[0.2] rounded-xl py-3 px-4 text-sm text-white/80 appearance-none cursor-pointer transition-all hover:border-white/40">
                            <option value="">Tous</option>
                            <option value="B2B" <%= filters.market === 'B2B' ? 'selected' : '' %>>B2B</option>
                            <option value="B2C" <%= filters.market === 'B2C' ? 'selected' : '' %>>B2C</option>
                            <option value="Les deux" <%= filters.market === 'Les deux' ? 'selected' : '' %>>B2B & B2C</option>
                        </select>
                    </div>
                    <!-- Experience -->
                    <div class="space-y-2">
                        <label class="text-[10px] uppercase font-bold text-white/60 tracking-wider">Expérience min.</label>
                        <input type="number" name="yearsExperience" placeholder="0 ans" value="<%= filters.yearsExperience || '' %>"
                            class="w-full bg-surface-950 border border-white/[0.2] rounded-xl py-3 px-4 text-sm text-white/80 placeholder-white/35 transition-all hover:border-white/40">
                    </div>
                    <!-- Mission -->
                    <div class="space-y-2">
                        <label class="text-[10px] uppercase font-bold text-white/60 tracking-wider">Type de mission</label>
                        <select name="missionType" class="w-full bg-surface-950 border border-white/[0.2] rounded-xl py-3 px-4 text-sm text-white/80 appearance-none cursor-pointer transition-all hover:border-white/40">
                            <option value="">Peu importe</option>
                            <option value="Mission (Webi/Challenge)" <%= filters.missionType === 'Mission (Webi/Challenge)' ? 'selected' : '' %>>Webi / Challenge</option>
                            <option value="Long terme" <%= filters.missionType === 'Long terme' ? 'selected' : '' %>>Long terme</option>
                        </select>
                    </div>
                </div>

                <!-- Total Closed -->
                <div class="mb-6">
                    <label class="text-[10px] uppercase font-bold text-white/60 tracking-wider">Montant total closé (min)</label>
                    <div class="relative mt-2 max-w-xs">
                        <span class="absolute left-4 top-1/2 -translate-y-1/2 text-white/20 text-sm font-mono">€</span>
                        <input type="number" name="totalClosed" placeholder="50 000" value="<%= filters.totalClosed || '' %>"
                            class="w-full bg-surface-950 border border-white/[0.2] rounded-xl py-3 pl-9 pr-4 text-sm text-white/80 font-mono placeholder-white/35 transition-all hover:border-white/40">
                    </div>
                </div>

                <!-- Product Types -->
                <div>
                    <label class="text-[10px] uppercase font-bold text-white/60 tracking-wider mb-3 block">Expertise produit</label>
                    <%
                    const isChecked = (val) => {
                        if (!filters.productTypes) return false;
                        return Array.isArray(filters.productTypes) ? filters.productTypes.includes(val) : filters.productTypes === val;
                    }
                    const productTypeOptions = [
                        { value: 'Crypto_Trading', label: 'Crypto & Trading', icon: 'fa-bitcoin-sign' },
                        { value: 'Ecommerce_Dropshipping', label: 'E-com & Drop', icon: 'fa-cart-shopping' },
                        { value: 'Marketing_SMMA', label: 'Marketing & SMMA', icon: 'fa-bullhorn' },
                        { value: 'Creation_contenu', label: 'CM & Creation de contenu', icon: 'fa-graduation-cap' },
                        { value: 'Coaching_Business', label: 'Coaching Business', icon: 'fa-handshake' },
                        { value: 'IA', label: 'Intelligence Artificielle', icon: 'fa-microchip' },
                        { value: 'SaaS_B2B', label: 'SaaS B2B', icon: 'fa-cloud' },
                        { value: 'Fitness', label: 'Fitness & Santé', icon: 'fa-dumbbell' },
                        { value: 'Dev_Perso', label: 'Dév. Personnel', icon: 'fa-brain' },
                        { value: 'Love_Coaching', label: 'Love Coaching', icon: 'fa-heart' },
                        { value: 'Energies', label: 'Énergies Renouvelables', icon: 'fa-solar-panel' },
                    ];
                    %>
                    <div class="flex flex-wrap gap-2">
                        <% productTypeOptions.forEach(opt => { %>
                            <label class="tag-chip rounded-xl px-3.5 py-2 cursor-pointer flex items-center gap-2 select-none has-[:checked]:bg-accent-600/15 has-[:checked]:border-accent-500/40">
                                <input type="checkbox" name="productTypes" value="<%= opt.value %>" class="sr-only" <%= isChecked(opt.value) ? 'checked' : '' %>>
                                <i class="fas <%= opt.icon %> text-[10px] text-white/70"></i>
                                <span class="text-xs font-medium text-white/70"><%= opt.label %></span>
                            </label>
                        <% }) %>
                    </div>
                </div>

                <div class="flex justify-end mt-6 pt-4 border-t border-white/[0.1]">
                    <a href="/" class="text-white/25 hover:text-white/60 text-xs font-medium transition-colors mr-4 py-2">Réinitialiser</a>
                    <button type="submit" class="bg-white text-surface-950 hover:bg-accent-500 hover:text-white px-6 py-2.5 rounded-xl text-xs font-bold uppercase tracking-wide transition-all duration-300">Appliquer</button>
                </div>
            </div>
        </div>
    </form>
</section>

<!-- ═══════════════ RESULTS HEADER ═══════════════ -->
<section class="max-w-[1400px] mx-auto px-5 md:px-8 mb-6 stagger-in" style="animation-delay:0.2s">
    <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
            <div class="w-2 h-2 rounded-full bg-accent-500 animate-pulse"></div>
            <p class="text-white/80 text-sm"><span class="text-white font-bold"><%= closers.length %></span> talent<%= closers.length > 1 ? 's' : '' %> trouvé<%= closers.length > 1 ? 's' : '' %></p>
        </div>
    </div>
    <div class="h-px w-full bg-gradient-to-r from-transparent via-white/[0.06] to-transparent mt-4"></div>
</section>

<!-- ═══════════════ GRID ═══════════════ -->
<main class="max-w-[1400px] mx-auto px-5 md:px-8 pb-24">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5">
        <% closers.forEach((closer, idx) => { %>
            <div onclick="openModal('modal-<%= closer._id %>')"
                class="card-glow relative rounded-2xl overflow-hidden cursor-pointer flex flex-col stagger-in group transition-all duration-500
                <%= closer.isPremium ? 'border border-accent-400/40 shadow-[0_0_30px_rgba(139,92,246,0.10)] hover:shadow-[0_0_55px_rgba(139,92,246,0.22)] hover:border-accent-400/70' : 'bg-white/[0.02] border border-white/[0.10] hover:border-white/20 hover:bg-white/[0.03]' %>">

                <% if (closer.isPremium) { %>
                    <div class="absolute top-0 left-0 z-30">
                        <div class="absolute top-3 left-3 z-20">
                            <div class="bg-gradient-to-br from-accent-400 via-slate-50 to-slate-200 border border-white/60 py-1.5 px-3.5 rounded-lg shadow-md flex items-center gap-2">
                                <i class="far fa-gem text-[9px] text-slate-700"></i>
                                <span class="text-[9px] font-black uppercase tracking-[0.25em] text-slate-800 leading-none">
                                    Pro
                                </span>
                            </div>
                        </div>
                    </div>
                <% } %>

                <div class="h-56 relative overflow-hidden">
                    <img src="<%= closer.photoUrl %>" alt="<%= closer.nom %>" loading="lazy" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 brightness-90 <%= closer.isPremium ? 'saturate-150' : 'saturate-100' %>">
                    <div class="absolute inset-0 bg-gradient-to-t from-surface-950 via-surface-950/30 to-transparent"></div>

                    <div class="absolute top-3 right-3 flex flex-col gap-1.5 items-end">
                        <span class="bg-surface-950/80 backdrop-blur-md border border-white/10 px-2.5 py-1 text-[10px] font-bold uppercase tracking-wide rounded-lg text-white/80">
                            <%= closer.yearsExperience %> ans
                        </span>
                    </div>

                    <div class="absolute bottom-4 left-5 right-5">
                        <h3 class="text-xl font-bold text-white leading-tight flex items-center gap-2">
                            <%= closer.prenom %> <%= closer.nom.charAt(0) %>.
                            <% if (closer.isPremium) { %> 
                                <i class="fas fa-certificate text-accent-400 text-sm drop-shadow-[0_0_10px_rgba(139,92,246,0.8)]" title="Vérifié Elite"></i> 
                            <% } %>
                        </h3>
                        <p class="text-accent-400 text-[11px] font-mono font-medium mt-0.5 uppercase tracking-wide"><%= closer.market %></p>
                    </div>
                </div>

                <div class="p-5 flex flex-col flex-1 <%= closer.isPremium ? 'bg-accent-500/[0.03]' : '' %>">
                    <div class="grid grid-cols-2 gap-3 mb-4">
                        <div class="stat-pill rounded-xl px-3 py-2.5">
                            <p class="text-[9px] text-white/45 uppercase tracking-wider font-bold mb-0.5">Closé</p>
                            <p class="text-white font-mono font-bold text-base"><%= closer.totalClosed ? closer.totalClosed.toLocaleString() : '0' %>€</p>
                        </div>
                        <div class="stat-pill rounded-xl px-3 py-2.5">
                            <p class="text-[9px] text-white/45 uppercase tracking-wider font-bold mb-0.5">Expertise</p>
                            <span class="text-[11px] text-white font-medium truncate block"><%= closer.productTypes[0] || '-' %></span>
                        </div>
                    </div>

                    <div class="mt-auto pt-3 border-t border-white/[0.04] flex items-center justify-between">
                        <span class="text-[11px] text-white/60 italic truncate max-w-[200px] font-light">"<%= closer.closingPhilosophy ? closer.closingPhilosophy.substring(0, 30) + '…' : '…' %>"</span>
                        <div class="w-8 h-8 rounded-full bg-white/[0.04] flex items-center justify-center group-hover:bg-accent-600 transition-all duration-300">
                            <i class="fas fa-arrow-right text-[10px] text-white/30 group-hover:text-white"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ═══════════════ MODAL ═══════════════ -->
            <div id="modal-<%= closer._id %>" class="modal-backdrop fixed inset-0 z-[100] flex items-stretch md:items-center justify-center p-0 md:p-4" onclick="closeModal(event, 'modal-<%= closer._id %>')">
                <div class="absolute inset-0 bg-surface-950/85 backdrop-blur-xl"></div>

                <div class="modal-panel bg-surface-900 w-full md:max-w-4xl h-full md:h-auto md:max-h-[92vh] overflow-y-auto rounded-none md:rounded-3xl border-0 md:border md:border-white/[0.06] shadow-2xl shadow-black/60 relative z-10 flex flex-col md:flex-row" onclick="event.stopPropagation()">

                    <!-- Close btn -->
                    <button onclick="closeModalDirect('modal-<%= closer._id %>')" class="absolute top-4 right-4 w-10 h-10 rounded-xl bg-white/[0.05] hover:bg-white/[0.12] border border-white/[0.08] flex items-center justify-center transition-all z-20 group">
                        <i class="fas fa-xmark text-white/60 group-hover:text-white text-sm"></i>
                    </button>

                    <!-- Left panel -->
                    <div class="md:w-[38%] bg-white/[0.02] p-5 md:p-8 border-r border-white/[0.04] flex flex-col">
                        <div class="w-32 h-32 md:w-full md:aspect-[4/5] md:h-auto rounded-2xl overflow-hidden mb-4 md:mb-6 border border-white/[0.06] relative mx-auto md:mx-0 shrink-0">
                            <img src="<%= closer.photoUrl %>" class="w-full h-full object-cover" style="filter: saturate(0.9);">
                            <div class="absolute inset-0 bg-gradient-to-t from-surface-900/50 to-transparent"></div>
                        </div>

                        <h2 class="text-xl md:text-2xl font-bold leading-tight text-center md:text-left"><%= closer.prenom %></h2>
                        <h2 class="text-xl md:text-2xl font-bold text-accent-400 mb-4 md:mb-5 text-center md:text-left"><%= closer.nom.charAt(0) %>.</h2>

                        <div class="space-y-3 mb-6 text-sm">
                            <div class="flex justify-between py-2 border-b border-white/[0.04]">
                                <span class="text-white/50 text-xs uppercase tracking-wide font-medium">Expérience</span>
                                <span class="font-bold text-white/90"><%= closer.yearsExperience %> ans</span>
                            </div>
                            <div class="flex justify-between py-2 border-b border-white/[0.04]">
                                <span class="text-white/50 text-xs uppercase tracking-wide font-medium">Total Closé</span>
                                <span class="font-bold font-mono text-emerald-400"><%= closer.totalClosed ? closer.totalClosed.toLocaleString() : '0' %>€</span>
                            </div>
                            <div class="flex justify-between py-2 border-b border-white/[0.04]">
                                <span class="text-white/50 text-xs uppercase tracking-wide font-medium">Mission</span>
                                <span class="font-semibold text-white/90 text-right text-xs"><%= closer.missionType %></span>
                            </div>
                            <div class="flex justify-between py-2 border-b border-white/[0.04]">
                                <span class="text-white/50 text-xs uppercase tracking-wide font-medium">Disponibilité</span>
                                <span class="font-semibold text-white/90"><%= closer.availability %></span>
                            </div>
                            <div class="flex justify-between py-2 border-b border-white/[0.04]">
                                <span class="text-white/50 text-xs uppercase tracking-wide font-medium">Objectif</span>
                                <span class="font-semibold text-white/90"><%= closer.desiredIncome ? closer.desiredIncome + '€/m' : 'N/C' %></span>
                            </div>
                        </div>

                        <!-- Contact -->
                        <div class="mt-auto space-y-2.5">
                            <% if (user) { %>
                                <div onclick="event.stopPropagation(); revealContact(this)" class="reveal-btn cursor-pointer bg-white border border-white/10 py-3.5 rounded-xl font-bold text-center transition-all text-xs uppercase tracking-wide flex items-center justify-center gap-2.5 relative overflow-hidden group/r">
                                    <i class="far fa-envelope text-accent-600 text-sm z-10"></i>
                                    <span class="contact-val text-surface-900 z-10 truncate max-w-[170px] transition-all duration-500" style="filter:blur(5px)"><%= closer.email %></span>
                                    <div class="reveal-cover absolute inset-0 flex items-center justify-center bg-white z-20">
                                        <span class="text-[10px] font-bold text-surface-900/60 uppercase tracking-widest flex items-center gap-1.5">
                                            <i class="fas fa-eye text-accent-600"></i> Voir l'email
                                        </span>
                                    </div>
                                </div>
                                <div onclick="event.stopPropagation(); revealContact(this)" class="reveal-btn cursor-pointer bg-white/[0.04] border border-white/[0.08] py-3.5 rounded-xl font-bold text-center hover:bg-white/[0.07] transition-all text-xs uppercase tracking-wide flex items-center justify-center gap-2.5 relative overflow-hidden group/r">
                                    <i class="fas fa-phone text-accent-400 text-sm z-10"></i>
                                    <span class="contact-val text-white/80 z-10 transition-all duration-500" style="filter:blur(5px)"><%= closer.telephone %></span>
                                    <div class="reveal-cover absolute inset-0 flex items-center justify-center bg-surface-900/95 z-20">
                                        <span class="text-[10px] font-bold text-white/40 uppercase tracking-widest flex items-center gap-1.5">
                                            <i class="fas fa-eye text-accent-400"></i> Voir le tél
                                        </span>
                                    </div>
                                </div>
                            <% } else { %>
                                <a href="/register-choice" class="block bg-white/[0.1] text-white/50 border border-white/[0.2] py-3.5 rounded-xl font-bold text-center hover:bg-accent-600 hover:text-white hover:border-accent-500 transition-all duration-300 text-xs uppercase tracking-wide">
                                    <i class="fas fa-lock mr-2"></i> Inscrivez-vous pour contacter
                                </a>
                            <% } %>
                        </div>
                    </div>

                    <!-- Right panel -->
                    <div class="md:w-[62%] p-5 md:p-8 overflow-y-visible md:overflow-y-auto">
                        <!-- Tags -->
                        <div class="flex flex-wrap gap-2 mb-8">
                            <span class="bg-accent-600 px-3 py-1.5 rounded-lg text-[11px] font-bold uppercase tracking-wide"><%= closer.profileType %></span>
                            <span class="bg-white/[0.06] border border-white/[0.08] px-3 py-1.5 rounded-lg text-[11px] uppercase tracking-wide text-white/60"><%= closer.market %></span>
                            <% if(closer.productTypes) { %>
                                <% closer.productTypes.forEach(type => { %>
                                    <span class="border border-white/[0.08] px-3 py-1.5 rounded-lg text-[11px] uppercase text-white/90"><%= type %></span>
                                <% }) %>
                            <% } %>
                        </div>

                        <!-- Philosophy -->
                        <div class="mb-8">
                            <h3 class="text-xs font-bold uppercase tracking-[0.15em] text-white/90 mb-4 flex items-center gap-2">
                                <span class="w-4 h-px bg-accent-500"></span> Vision du Closing
                            </h3>
                            <div class="bg-white/[0.02] border border-white/[0.05] p-6 rounded-2xl relative">
                                <div class="absolute top-4 left-5 text-white/[0.03] text-5xl leading-none font-serif">"</div>
                                <p class="text-white/70 leading-relaxed text-sm italic pl-4 border-l-2 border-accent-500/30">
                                    <%= closer.closingPhilosophy || 'Non renseigné.' %>
                                </p>
                            </div>
                        </div>

                        <!-- Details grid -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                            <div>
                                <h3 class="text-xs font-bold uppercase tracking-[0.15em] text-white/50 mb-3 flex items-center gap-2">
                                    <i class="fas fa-file-signature text-accent-400/50 text-[10px]"></i> Contrats acceptés
                                </h3>
                                <div class="flex flex-wrap gap-2">
                                    <% if(closer.contractType) { %>
                                        <% closer.contractType.forEach(c => { %>
                                            <span class="text-white/90 text-xs bg-white/[0.05] border border-white/[0.06] px-3 py-1.5 rounded-lg font-medium"><%= c %></span>
                                        <% }) %>
                                    <% } else { %>
                                        <span class="text-white/20 text-xs">—</span>
                                    <% } %>
                                </div>
                            </div>
                            <div>
                                <h3 class="text-xs font-bold uppercase tracking-[0.15em] text-white/50 mb-3 flex items-center gap-2">
                                    <i class="fas fa-building text-accent-400/50 text-[10px]"></i> Anciens Clients
                                </h3>
                                <p class="text-white/90 text-sm leading-relaxed"><%= closer.pastClients || 'Confidentiel' %></p>
                            </div>
                        </div>

                        <!-- Video -->
                        <% if (closer.videoUrl) { %>
                            <div>
                                <h3 class="text-xs font-bold uppercase tracking-[0.15em] text-white/25 mb-4 flex items-center gap-2">
                                    <span class="w-4 h-px bg-accent-500"></span> Vidéo de présentation
                                </h3>
                                <a href="<%= closer.videoUrl %>" target="_blank" rel="noopener"
                                   class="flex items-center gap-5 bg-white/[0.02] border border-white/[0.06] rounded-2xl p-5 hover:border-accent-500/30 hover:bg-accent-600/5 transition-all duration-300 group/v">
                                    <div class="w-14 h-14 rounded-2xl bg-accent-600/10 border border-accent-500/20 flex items-center justify-center shrink-0 group-hover/v:bg-accent-600 group-hover/v:border-accent-500 transition-all duration-300">
                                        <i class="fas fa-play text-accent-400 group-hover/v:text-white ml-0.5 transition-colors"></i>
                                    </div>
                                    <div class="min-w-0">
                                        <p class="font-bold text-sm text-white/80 group-hover/v:text-white transition-colors">Regarder la démo</p>
                                        <p class="text-xs text-white/20 truncate"><%= closer.videoUrl %></p>
                                    </div>
                                </a>
                            </div>
                        <% } %>
                    </div>
                </div>
            </div>
        <% }) %>
    </div>

    <!-- Empty state -->
    <% if (closers.length === 0) { %>
        <div class="text-center py-28">
            <div class="w-20 h-20 rounded-3xl bg-white/[0.03] border border-white/[0.06] flex items-center justify-center mx-auto mb-6">
                <i class="fas fa-magnifying-glass text-2xl text-white/10"></i>
            </div>
            <p class="text-lg font-semibold text-white/20 mb-2">Aucun talent trouvé</p>
            <p class="text-sm text-white/10 mb-6">Essayez d'ajuster vos filtres de recherche.</p>
            <a href="/" class="inline-flex items-center gap-2 text-accent-400 hover:text-white border border-accent-500/20 hover:border-accent-500 px-5 py-2.5 rounded-xl text-xs font-bold uppercase tracking-wider transition-all duration-300">
                <i class="fas fa-rotate-left text-[10px]"></i> Réinitialiser
            </a>
        </div>
    <% } %>
</main>

<!-- ═══════════════ FOOTER ═══════════════ -->
<footer class="border-t border-white/[0.06] bg-black/20 mt-20 backdrop-blur-sm">
    <div class="max-w-[1400px] mx-auto px-6 md:px-8 py-10">
        
        <div class="flex flex-col md:flex-row md:items-center justify-between gap-6 mb-8">
            
            <a href="mailto:contact@sefairecloser.com" class="group flex items-center gap-3 transition-colors">
                <div class="w-8 h-8 rounded-full bg-white/[0.03] border border-white/[0.06] flex items-center justify-center group-hover:bg-white/[0.1] group-hover:border-white/20 transition-all">
                    <i class="fas fa-envelope text-white/40 text-[10px] group-hover:text-white transition-colors"></i>
                </div>
                <div class="flex flex-col">
                    <span class="text-[9px] uppercase tracking-widest text-white/30 font-bold mb-0.5">Nous écrire</span>
                    <span class="text-xs text-white/70 group-hover:text-white font-mono transition-colors">contact@sefairecloser.com</span>
                </div>
            </a>

            <div class="flex items-center gap-3 px-4 py-2 rounded-full bg-white/[0.02] border border-white/[0.04]">
                <span class="text-[10px] font-bold text-white/40 uppercase tracking-widest">Fait en France</span>
                <span class="flex h-2 w-2 relative">
                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-500 opacity-75"></span>
                    <span class="relative inline-flex rounded-full h-2 w-2 bg-gradient-to-br from-blue-600 via-white to-red-600"></span>
                </span>
            </div>
        </div>

        <div class="h-px w-full bg-gradient-to-r from-transparent via-white/[0.06] to-transparent mb-8"></div>

        <div class="flex flex-col md:flex-row items-center justify-between gap-4">
            
            <p class="text-[10px] text-white/20 font-medium tracking-wider uppercase">
                © 2025 SEFAIRECLOSER.COM<span class="hidden md:inline">·</span> <a href="#" class="hover:text-white/40 transition-colors">Mentions Légales</a>
            </p>

            <div class="flex items-center gap-2 px-3 py-1.5 rounded-lg bg-emerald-500/[0.05] border border-emerald-500/10">
                <div class="relative flex h-1.5 w-1.5">
                  <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span>
                  <span class="relative inline-flex rounded-full h-1.5 w-1.5 bg-emerald-500"></span>
                </div>
                <span class="text-[9px] text-emerald-500/80 font-bold uppercase tracking-widest">Système Opérationnel</span>
            </div>
            
        </div>
    </div>
</footer>

<%- include('partials/premium-modal') %>
<script>
    // --- Filter toggle ---
    function toggleFilters() {
        const panel = document.getElementById('filterPanel');
        const chevron = document.getElementById('filterChevron');
        panel.classList.toggle('open');
        chevron.style.transform = panel.classList.contains('open') ? 'rotate(180deg)' : '';
    }

    // Auto-open filters if any advanced filter is active
    (() => {
        const params = new URLSearchParams(window.location.search);
        const advancedKeys = ['profileType','market','yearsExperience','missionType','totalClosed','productTypes'];
        if (advancedKeys.some(k => params.get(k))) toggleFilters();
    })();

    // --- Custom checkbox tag chips ---
    document.querySelectorAll('.tag-chip input[type="checkbox"]').forEach(cb => {
        const label = cb.closest('.tag-chip');
        const updateStyle = () => {
            if (cb.checked) {
                label.style.background = 'rgba(139,92,246,0.12)';
                label.style.borderColor = 'rgba(139,92,246,0.35)';
                label.querySelector('span').style.color = 'rgba(255,255,255,0.85)';
                label.querySelector('i').style.color = 'rgba(139,92,246,0.7)';
            } else {
                label.style.background = '';
                label.style.borderColor = '';
                label.querySelector('span').style.color = '';
                label.querySelector('i').style.color = '';
            }
        };
        cb.addEventListener('change', updateStyle);
        updateStyle();
    });

    // --- Modal ---
    function openModal(id) {
        const modal = document.getElementById(id);
        if (!modal) return;
        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
        document.body.classList.add('modal-open');
    }
    function closeModal(e, id) {
        if (e.target === e.currentTarget || e.target.closest('.modal-backdrop > .absolute')) {
            const modal = document.getElementById(id);
            if (!modal) return;
            modal.classList.remove('active');

            // Si plus aucun modal n'est ouvert, on réaffiche la page normalement
            if (!document.querySelector('.modal-backdrop.active')) {
                document.body.style.overflow = '';
                document.body.classList.remove('modal-open');
            }
        }
    }
    function closeModalDirect(id) {
        const modal = document.getElementById(id);
        if (!modal) return;
        modal.classList.remove('active');

        if (!document.querySelector('.modal-backdrop.active')) {
            document.body.style.overflow = '';
            document.body.classList.remove('modal-open');
        }
    }
    // ESC to close
    document.addEventListener('keydown', e => {
        if (e.key === 'Escape') {
            document.querySelectorAll('.modal-backdrop.active').forEach(m => {
                m.classList.remove('active');
            });
            document.body.style.overflow = '';
            document.body.classList.remove('modal-open');
        }
    });

    // --- Reveal contact ---
    function revealContact(el) {
        // 1. Lance l'animation du bouton (le cache disparaît)
        el.classList.add('revealed');
        
        // 2. Trouve le texte flouté à l'intérieur
        const textSpan = el.querySelector('.contact-val');
        
        // 3. Supprime le style de flou inline pour rendre le texte net
        if (textSpan) {
            textSpan.style.filter = 'none';
        }
    }
</script>

</body>
</html>
